<!DOCTYPE html>
<html lang="en_CH">

  {% include head.html %}

  <body class="bg-gray-b white avenir man pan">

    {% include header.html %}

    <main class="man pan">
        {{ content }}
    </main>

    {% include footer.html %}

    <script src="js/main.js"></script>
    <script>
        smoothScroll.init();
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

    <script>
    jQuery(".owl-carousel").on("initialized.owl.carousel", () => {
      setTimeout(() => {
        jQuery(".owl-item.active .owl-slide-animated").addClass("is-transitioned");
        jQuery("section").show();
      }, 200);
    });

    const jQueryowlCarousel = jQuery(".owl-carousel").owlCarousel({
      items: 1,
      loop: true,
      nav: false
    });

    jQueryowlCarousel.on("changed.owl.carousel", e => {
      jQuery(".owl-slide-animated").removeClass("is-transitioned");

      const jQuerycurrentOwlItem = jQuery(".owl-item").eq(e.item.index);
      jQuerycurrentOwlItem.find(".owl-slide-animated").addClass("is-transitioned");

      const jQuerytarget = jQuerycurrentOwlItem.find(".owl-slide-text");
      doDotsCalculations(jQuerytarget);
    });

    jQueryowlCarousel.on("resize.owl.carousel", () => {
      setTimeout(() => {
        setOwlDotsPosition();
      }, 50);
    });

    /*if there isn't content underneath the carousel*/
    //jQueryowlCarousel.trigger("refresh.owl.carousel");

    setOwlDotsPosition();

    function setOwlDotsPosition() {
      const jQuerytarget = jQuery(".owl-item.active .owl-slide-text");
      doDotsCalculations(jQuerytarget);
    }
    </script>

  </body>

</html>
